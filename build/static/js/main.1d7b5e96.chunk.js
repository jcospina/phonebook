(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),a=(t(19),t(3)),o=t(2),u=t(0),s=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("label",{children:"Search: "}),Object(u.jsx)("input",{value:e.searchTerm,onChange:e.onSearchChange})]})},i=function(e){return Object(u.jsxs)("form",{onSubmit:e.addNewPerson,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Name: "}),Object(u.jsx)("input",{value:e.newName,onChange:e.onNameChange})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Number: "}),Object(u.jsx)("input",{value:e.newNumber,onChange:e.onNumberChange})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.persons,t=e.deletePerson;return Object(u.jsx)("table",{children:Object(u.jsx)("tbody",{children:n.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:e.number}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return t(e.id)},children:"Delete"})})]},e.name)}))})})},j=function(e){var n=e.notification;return null===n?null:Object(u.jsx)("div",{className:n.type,children:n.message})},l=t(4),b=t.n(l),h="/api/persons",m={getAll:function(){return b.a.get(h).then((function(e){return e.data}))},addPerson:function(e){return b.a.post(h,e).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(h,"/").concat(e))},updatePerson:function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},f=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),l=Object(a.a)(c,2),b=l[0],h=l[1],f=Object(o.useState)(""),O=Object(a.a)(f,2),p=O[0],x=O[1],v=Object(o.useState)(""),g=Object(a.a)(v,2),w=g[0],y=g[1],N=Object(o.useState)(null),C=Object(a.a)(N,2),P=C[0],S=C[1],k=function(e){S(e),setTimeout((function(){S(null)}),5e3)};Object(o.useEffect)((function(){m.getAll().then((function(e){return r(e)}))}),[]);var A=function(e){var n=t.find((function(n){return n.name===e.name}));m.updatePerson(n.id,e).then((function(e){return k({message:"Updated ".concat(e.name),type:"success"}),r(t.map((function(n){return n.id!==e.id?n:e})))})).catch((function(e){return k({message:"Information on ".concat(n.name," has already been removed from the server"),type:"error"})}))},D=t.filter((function(e){var n=w.trim().toLocaleLowerCase();return e.name.toLocaleLowerCase().indexOf(n)>=0}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(j,{notification:P}),Object(u.jsx)(s,{searchTerm:w,onSearchChange:function(e){return y(e.target.value)}}),Object(u.jsx)("h2",{children:"Add New"}),Object(u.jsx)(i,{addNewPerson:function(e){e.preventDefault();var n={name:b,number:p.trim()};return t.some((function(e){return e.name===b}))&&window.confirm("".concat(b," is already added to the workbook. Do you want to replace the old number with a new one"))?A(n):m.addPerson(n).then((function(e){k({message:"Added ".concat(e.name),type:"success"}),r(t.concat(e)),h(""),x("")}))},newName:b,onNameChange:function(e){return h(e.target.value)},newNumber:p,onNumberChange:function(e){return x(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(d,{persons:D,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you want to delete?")&&m.deletePerson(e).then((function(){k({message:"Deleted ".concat(n.name),type:"success"}),r(t.filter((function(n){return n.id!==e})))})).catch((function(e){return k({message:"Information on ".concat(n.name," has already been removed from the server"),type:"error"})}))}})]})};c.a.render(Object(u.jsx)(f,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.1d7b5e96.chunk.js.map